<!doctype html>
<html>
  <head>
    <title>Refugees by Mediterranean Sea</title>
    <style type="text/css">
        html, body, #map-div {
              margin: 0;
              padding: 0;
              height: 100%;
              font-family: monospace;
        }

        .noselect {
          -webkit-touch-callout: none; /* iOS Safari */
          -webkit-user-select: none;   /* Chrome/Safari/Opera */
          -khtml-user-select: none;    /* Konqueror */
          -moz-user-select: none;      /* Firefox */
          -ms-user-select: none;       /* Internet Explorer/Edge */
          user-select: none;           /* Non-prefixed version, currently
                                          not supported by any browser */
        }
        
        #map-div{
            position: absolute; 
            top: 0px; 
            width: 100%; 
            height: calc(100% - 55px);
        }
        
        #time-slider{
            position: absolute;  
            bottom: 0px; 
            width: 100%; 
            height: 56px; 
            background-color: rgb(30,30,30);
        }

        .cursor{
          background-color: rgb(160,160,160) !important;
        }
        
        .trapezoid {
          border-bottom: 25px solid rgba(255,10,10,.5);
          border-left: 15px solid transparent;
          border-right: 15px solid transparent;
          height: 0;
          width: 7px;
          transform: scaleY(-1) translateY(-6px);
        }

        .bar{
          margin-left: 15px;
          width: 7px;
          height: 45%;
          background-color: rgba(255,10,10,.5);
          transform: translateY(23%);
        }
        
        #play-button{
            position: relative;
            float: left;
            width: 50px;
            height: 50px;
            background-color: rgb(30,30,30);
            border-bottom: 5px rgb(30,30,30);
        }

        #circle{
            position: absolute;
            width: 70%;
            height: 70%;
            -moz-border-radius: 50px/50px;
            -webkit-border-radius: 50px 50px;
            border-radius: 50px/50px;
            border:solid 2px rgb(130,130,130);
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: background-color .3s;
        }

        #circle:hover{
            background-color: rgb(100,100,100);
            cursor: pointer;
        }

        #circle:hover > .play{
          border-left: 12px solid rgb(30,30,30);
        }

        #circle:hover > .pause{
          background-color: rgb(30,30,30);
        }

        .play{
            position: absolute;
            width: 0; 
            height: 0; 
            border-top: 12px solid transparent;
            border-bottom: 12px solid transparent;
            border-left: 12px solid rgb(130,130,130);
            top: 50%;
            left: 54%;
            transform: translate(-50%, -50%);
        }

        .pause{
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: rgb(130,130,130);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid black;
        }
        
        .year{
            position: relative;
            float: left;
            width: calc((100% - 50px)/3);
            height: 50px;
            /**background-color: blue;**/
            text-align: center;
        }
        
        .year > p{
            position: relative; 
            margin-top: 30px; 
            text-align: center;
            font-size: 13px;
            color: white;
        }
        
        .month{
            height: 50%;
            width: calc(100%/12);
            background-color: rgb(20,20,20);
            float: left;
            transition: background-color .3s;
        }
        
        .valid{
            background-color: rgb(60,60,60);
        }
        
        .valid:hover{
            background-color: rgb(100,100,100);
            cursor: pointer;
        }
        
        .month > p{
            font-size: 11px;
            margin-top: 4px;
            color: white;
        }
    </style>

    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDC5znDfzJNHdK_Bc9jTPIVS4BUZhYeOAA"></script>
    <script type="text/javascript" src="js/CanvasLayer.js"></script>
      <script type="text/javascript" src="js/quadraticBezier.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

    <script type="text/javascript">
      var map;
      var canvasLayer;
      var particleLayer;
      var context;
      var particleContext;
        
      function Date_M_Y(month, year){
          this.month = month;
          this.year = year;
      }
        
      function Particle(path, radius){
          this.path = path;
          this.radius = radius || .15;
          this.percent = 0;
          this.draw = function(context){
              var currentPoint = this.path.getPointAtPercentage(this.percent);
              context.fillStyle = "rgb(255,255,255)";
              context.beginPath();
              context.arc(currentPoint.x, currentPoint.y,radius, 0, 2 * Math.PI, false);
              context.fill();
          };
          this.incrementPercent = function(){
              this.percent += 2.5;
              if(this.percent > 100) {
                  this.percent = 100;
              };
          };
          this.isComplete = function(){
              return (this.percent >= 100);
          };
      }
      function ParticleSet(particle, amount){
          this.particle = particle;
          this.amount = amount;
          this.ejectParticle = function(){
              this.amount--;
              return new Particle(this.particle.path, this.particle.radius);
          }
          this.isComplete = function(){
              return !this.amount;
          }
      }
        
      function ParticleManager(particleArr){
          this.particleArr = particleArr;
          this.particleSets = [];
          this.clock = null;
          this.addParticle = function(particle){
              this.particleArr.push(particle);
          };
          this.addParticleSet = function(particleSet){
              this.particleSets.push(particleSet)
          };
          this.clearParticleArr = function(){
              this.particleArr = [];
          };
          this.clearParticleSets = function(){
              this.particleSets = [];
          };
          this.draw = function(){
              var i = this.particleArr.length;
              while(--i >= 0){
                  var particle = this.particleArr[i];
                  if(particle.isComplete()){
                      this.particleArr.splice(i,1);
                  }else{
                      particle.incrementPercent();
                      particle.draw(particleContext);
                  }
              }
          };
      }
      function calculateRadius(amount){
          return .15;
      }
        
      function processParticles(){
          refugees.particles.clearParticleSets();
          var raw_data = refugees.draw_data.raw;
          for(var asyl_key in raw_data){
              var or_data = raw_data[asyl_key][refugees.currentDate.year][refugees.currentDate.month];
              for(var or_key in or_data){
                  var amount = or_data[or_key];
                  if(amount>0){
                      refugees.particles.addParticle(
                          new Particle(refugees.paths[or_key][asyl_key]["path"], calculateRadius(amount)));
                      // refugees.particles.addParticleSet(
                      //     new ParticleSet(refugees.paths[or_key][asyl_key]["path"], calculateRadius(amount)), amount);
                  }
              }
          }
      }
        
      var refugees = {
        geo_url: './geo_data/geo_data.json',
        draw_url: './json_store/processed_data.json',
        ready: true,
        geo_data: {},
        draw_data: {},
        particle_data: {},
        prev_shown: {},
        paths: {},
        particles: new ParticleManager([])
      };
        
      var playBack = {
          playing: false,
          player: null,
          mouseDown: false
      }
      
      var drawBack = {
          MAX_RADIUS: 3,
          BASE_RADIUS: .5,
          BASE_STROKE: .25,
          MAX_AMOUNT: 15000,
          origin_interpolate: 25,
          asylum_interpolate: 10,
          largestValue: {},
          largestOfAll: 0
      }

      var resolutionScale = window.devicePixelRatio || 1;
    
      function upDate(){
        refugees.currentDate = new Date_M_Y($('.cursor').data('month'), $('.cursor').parent().data('year'));
        processParticles()
        if (!canvasLayer.isAnimated())
            canvasLayer.setAnimate(true);
            setTimeout(function(){
                if(!playBack.playing){
                    canvasLayer.setAnimate(false);
                }
            }, 1500);
      }

      function testAllPaths(){
          var data = [];
          for(var or_key in refugees.paths){
              for(var asyl_key in refugees.paths[or_key]){
                  var path = refugees.paths[or_key][asyl_key]["path"];
                  data.push(or_key, asyl_key, path);
              }
          }
          delayExecute(data, 0);
      }
        
      function delayExecute(data, i){
          setTimeout(function(){
              console.log(data[i], data[i+1]);
              refugees.particles.addParticle(data[i+2]);
              console.log("done.");
              var j = i+3;
              if(j < data.length){
                  delayExecute(data, j);
              }
          }, 3000);
      }

      function togglePlayPause(){
        playBack.playing = !playBack.playing;
         $('#circle').children().toggleClass('play').toggleClass('pause');
        if(playBack.playing){
          play();
        }else{
          pause();
        }
      }

      function incrementMonth(){
        var currentCursorIndex = $('.cursor').index('.valid');
        if(currentCursorIndex < 0 || currentCursorIndex + 1 == $('.valid').length){
          $('.valid').removeClass('cursor');
          $('.valid').eq(0).addClass('cursor');
        }else{
          $('.valid').removeClass('cursor');
          $('.valid').eq(currentCursorIndex+1).addClass('cursor');
        }
        upDate();
      }

      function play(){
          canvasLayer.setAnimate(true);
          playBack.player = window.setInterval(incrementMonth, 1000);
      }

      function pause(){
        window.clearInterval(playBack.player);
        playBack.player = null;
        setTimeout(function(){
              canvasLayer.setAnimate(false);
          }, 1500);
      }
        
      function load(url) {
        return new Promise(function(resolve, reject){
            var xhr = new XMLHttpRequest();
            xhr.open('GET', url);
            xhr.responseType = 'json';
            xhr.onload = function() {
              if(xhr.status == 200){
                  resolve(this.response);
              }else{
                  reject(Error(xhr.statusText));
              }
            };
            // Handle network errors
            xhr.onerror = function() {
              reject(Error("Network Error"));
            };

            xhr.send();
        }); 
      }
        
      function updatePath(){
          path_geo = refugees.geo_data.path_geo;
          for(var or_key in path_geo){
              for(var asyl_key in path_geo[or_key]){
                  path_array = path_geo[or_key][asyl_key];
                  for(var i = 0; i < path_array.length; i++){
                      refugees.paths[or_key][asyl_key]["points"][i] = map.getProjection().fromLatLngToPoint(path_array[i]);
                  }
                  refugees.paths[or_key][asyl_key]["path"] = getPathThroughPoints(refugees.paths[or_key][asyl_key]["points"]);
              }
          }
      }
        
      function geo_handler(json_data){
          prev_shown_origin = {};
          prev_shown_asylum = {};
          for(var key in json_data.origin_geo){
              var lat_long = json_data.origin_geo[key];
              json_data.origin_geo[key] = new google.maps.LatLng(lat_long.lat, lat_long.lon);
              prev_shown_origin[key] = 0;
          }
          
          for(var key in json_data.asylum_geo){
              var lat_long = json_data.asylum_geo[key];
              json_data.asylum_geo[key] = new google.maps.LatLng(lat_long.lat, lat_long.lon);
              prev_shown_asylum[key] = 0;
          }
          
          var paths = {};
          
          for(var or_key in json_data.path_geo){
              paths[or_key] = {};
              var or_data = json_data.path_geo[or_key];
              for (var asyl_key in or_data){
                  paths[or_key][asyl_key] = {};
                  paths[or_key][asyl_key]["points"] = [];
                  paths[or_key][asyl_key]["path"] = null;
                  path_array = or_data[asyl_key];
                  for(var i = 0; i < path_array.length; i++){
                      var googleLatLong = new google.maps.LatLng(path_array[i].lat, path_array[i].lon);
                      json_data.path_geo[or_key][asyl_key][i] = googleLatLong;
                      paths[or_key][asyl_key]["points"].push(null);
                  }
              }
          }
          
          refugees.geo_data = json_data;
          refugees.prev_shown.origin = prev_shown_origin;
          refugees.prev_shown.asylum = prev_shown_asylum;
          refugees.paths = paths;
          console.log(refugees.geo_data, refugees.prev_shown);
      }
        
      function draw_handler(json_data){
          refugees.currentDate = new Date_M_Y(1,2014);
          $('#m1y2014').addClass('cursor');
          var dx_data = $.extend(true, {}, json_data);
          for(var asyl_country in json_data){
              var years_data = json_data[asyl_country];
              for (var year in years_data){
                  if(!(year in drawBack.largestValue)){
                      drawBack.largestValue[year] = {};
                  }
                  var year_data = years_data[year];
                  for (var month in year_data){
                      if(!(month in drawBack.largestValue[year])){
                          drawBack.largestValue[year][month] = 0;
                      }
                      $('#m'+month+'y'+year).addClass('valid');
                      var origin_countries = year_data[month];
                      var total = 0;
                      for(var or_key in origin_countries){
                          var currentVal = json_data[asyl_country][year][month][or_key];
                          if(month != 1 || year != 2014){
                              var prevVal = (month == 1) ? 
                                  json_data[asyl_country][year-1][12][or_key] : dx_data[asyl_country][year][month-1][or_key]
                              dx_data[asyl_country][year][month][or_key] = currentVal - prevVal;
                          }
                          total += currentVal;
                          currentLargest = drawBack.largestValue[year][month];
                          drawBack.largestValue[year][month] = (currentVal > currentLargest) ? currentVal : currentLargest;
                      }
                      currentLargest = drawBack.largestValue[year][month];
                      drawBack.largestValue[year][month] = (total > currentLargest) ? total : currentLargest;
                  }
              }
          }
          
          $("#m5y2016").removeClass('valid');
          $("#m6y2016").removeClass('valid');
          
          var largestOfAll = 0;
          for(var year in drawBack.largestValue){
              for (var month in drawBack.largestValue[year]){
                  var value = drawBack.largestValue[year][month];
                  largestOfAll = (value > largestOfAll) ? value : largestOfAll;
              }
          }
          
          drawBack.largestValue["largestOfAll"] = largestOfAll;
          
          refugees.draw_data.raw = json_data;
          refugees.draw_data.derivative = dx_data;
          console.log(refugees.draw_data, drawBack.largestValue);
      }
      
      Number.prototype.clamp = function(min, max) {
         return Math.min(Math.max(this, min), max);
      };
      
      function convert_to_radius(amount){
          amount = amount.clamp(0, drawBack.MAX_AMOUNT)
          return .035*Math.sqrt(amount);
      }
        
      function interpolateColors(r1, g1, b1, r2, g2, b2, min, max, val){
          var t = (val - min)/(max - min); 
          return {r:(1 - t)*r1 + t*r2, g:(1 - t)*g1 + t*g2,b:(1 - t)*b1 + t*b2}
      }
      String.prototype.format = function () {
          var args = [].slice.call(arguments);
              return this.replace(/(\{\d+\})/g, function (a){
                  return args[+(a.substr(1,a.length-2))||0];
              });
        };
        
      function convert_to_color(amount){
          var color = (amount > 0) ? 
              {r: 0, g:150, b:0} : {r: 150, g:0, b:0};
          if(amount == 0){
              color = {r: 80, g:80, b:80}
          }
          return "rgba({0},{1},{2}, {3})".format(color.r, color.g, color.b, .4);
      }
        
      function drawPath(context, path, data){
        //Drawing path
        makePath(context, path);
        context.lineWidth = .25;
        context.strokeStyle = convert_to_color(data);
        context.stroke();
      }
        
      function resize(){
      }
        
      function particleUpdate(){
          var canvasWidth = particleLayer.canvas.width;
          var canvasHeight = particleLayer.canvas.height;
          particleContext.clearRect(0, 0, canvasWidth, canvasHeight);
          var mapProjection = map.getProjection();
          particleContext.setTransform(1, 0, 0, 1, 0, 0);
          var scale = Math.pow(2, map.zoom) * resolutionScale;
          particleContext.scale(scale, scale);
          var offset = mapProjection.fromLatLngToPoint(particleLayer.getTopLeft());
          particleContext.translate(-offset.x, -offset.y);
          
          refugees.particles.draw();
          
      }

      function update() {
        // clear previous canvas contents
        var canvasWidth = canvasLayer.canvas.width;
        var canvasHeight = canvasLayer.canvas.height;
        context.clearRect(0, 0, canvasWidth, canvasHeight);
   
        /* We need to scale and translate the map for current view.
         * see https://developers.google.com/maps/documentation/javascript/maptypes#MapCoordinates
         */
        var mapProjection = map.getProjection();

        /**
         * Clear transformation from last update by setting to identity matrix.
         * Could use context.resetTransform(), but most browsers don't support
         * it yet.
         */
        context.setTransform(1, 0, 0, 1, 0, 0);
        
        // scale is just 2^zoom
        // If canvasLayer is scaled (with resolutionScale), we need to scale by
        // the same amount to account for the larger canvas.
        var scale = Math.pow(2, map.zoom) * resolutionScale;
        context.scale(scale, scale);

        /* If the map was not translated, the topLeft corner would be 0,0 in
         * world coordinates. Our translation is just the vector from the
         * world coordinate of the topLeft corder to 0,0.
         */
        var offset = mapProjection.fromLatLngToPoint(canvasLayer.getTopLeft());
        context.translate(-offset.x, -offset.y);
           
        //origins
        origin_geo = refugees.geo_data.origin_geo;
        asylum_geo = refugees.geo_data.asylum_geo;
        path_geo = refugees.geo_data.path_geo;
        circle_data = refugees.draw_data.raw;
        path_data = refugees.draw_data.derivative;
        var month = refugees.currentDate.month;
        var year = refugees.currentDate.year;
          
        //origin
        for(var or_key in origin_geo){
            var radius = drawBack.BASE_RADIUS;
            var error = false;
            var originPoint = mapProjection.fromLatLngToPoint(origin_geo[or_key]);
            var currentAmount = 0;
            for(var asyl_country in circle_data){
                var asylumPoint = mapProjection.fromLatLngToPoint(asylum_geo[asyl_country]);
                if(month in circle_data[asyl_country][year] 
                   && or_key in circle_data[asyl_country][year][month]){
                    currentAmount = circle_data[asyl_country][year][month][or_key] || 0;
                    var prevAmount = refugees.prev_shown["origin"][or_key];
                    
                    var interpolated_raw = (currentAmount == prevAmount) ? 
                        currentAmount : prevAmount + Math.ceil((currentAmount - prevAmount)/drawBack.origin_interpolate);
                    radius += convert_to_radius(interpolated_raw);
                    refugees.prev_shown["origin"][or_key] = interpolated_raw;
                    
                    var pointData = path_geo[or_key][asyl_country];
                    var path = refugees.paths[or_key][asyl_country]["path"];
                    drawPath(context, 
                             path, 
                             path_data[asyl_country][year][month][or_key]);
                    
                }else if(!(month in circle_data[asyl_country][year])){
                    radius = .25;
                    error = true;
                } 
            }
            radius = (radius < 0) ? .1 : radius;
            
            if(!error){
                context.fillStyle = 'rgba(68, 116, 215, .3)';
                context.strokeStyle = 'rgb(68, 116, 215)';
            }else{
                context.fillStyle = 'rgba(180, 180, 180, .3)';
                 context.strokeStyle = 'rgb(180, 180, 180)';
            }
             //draws circle at origin country
            context.beginPath();
            context.arc(originPoint.x, originPoint.y,radius, 0, 2 * Math.PI, false);
            context.fill();
            context.lineWidth = drawBack.BASE_STROKE;
            context.stroke();
        }
          
        //asylum
        for(var asyl_country in circle_data){
            var radius = drawBack.BASE_RADIUS;
            origin_countries = circle_data[asyl_country][year][month]
            var total = 0;
            for (var country in origin_countries){
                total += (origin_countries[country] || 0)
            }
            var prevTotal = refugees.prev_shown["asylum"][asyl_country];
            var interpolated_raw = (total == prevTotal) ? 
                        total : prevTotal + Math.ceil((total - prevTotal)/drawBack.asylum_interpolate);
            refugees.prev_shown["asylum"][asyl_country] = interpolated_raw;
            radius += convert_to_radius(interpolated_raw);
            radius = (radius < 0) ? .1 : radius;
            var asylumPoint = mapProjection.fromLatLngToPoint(asylum_geo[asyl_country]);
            context.beginPath();
            context.arc(asylumPoint.x, asylumPoint.y,radius, 0, 2 * Math.PI, false);
            context.fillStyle = 'rgba(215, 68, 115, .3)';
            context.fill();
            context.lineWidth = drawBack.BASE_STROKE;
            context.strokeStyle = 'rgb(215, 68, 115)';
            context.stroke();
        } 
      }
        
      function initMap(){
        // initialize the map
        var mapOptions = {
          zoom: 4,
          minZoom: 3,
          center: new google.maps.LatLng(34.17497, 22.09833),
          mapTypeId: google.maps.MapTypeId.TERRAIN,
          styles: [
                   {
                      "featureType":"all",
                      "elementType":"all",
                      "stylers":[
                         {
                            "saturation":-100
                         }
                      ]
                   },
                   {
                      "featureType":"water",
                      "elementType":"geometry.fill",
                      "stylers":[
                         {
                            "color":"#248f8f"
                         }
                      ]
                   },
                   {
                      "featureType":"road",
                      "elementType":"all",
                      "stylers":[
                         {
                            "visibility":"off"
                         }
                      ]
                   },
                   {
                      "featureType":"administrative.province",
                      "elementType":"all",
                      "stylers":[
                         {
                            "visibility":"simplified"
                         }
                      ]
                   },
                   {
                      "featureType":"administrative.locality",
                      "elementType":"all",
                      "stylers":[
                         {
                            "visibility":"simplified"
                         }
                      ]
                   },
                   {
                      "featureType":"landscape.natural",
                      "elementType":"geometry.fill",
                      "stylers":[
                         {
                            "color":"#c4c4c4"
                         }
                      ]
                   },{
                        "featureType": "landscape.natural.terrain",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "visibility": "off"
                            }
                        ]
                    }
                ]
        };
        var mapDiv = document.getElementById('map-div');
        return new google.maps.Map(mapDiv, mapOptions);
      }
        
      function initCanvasLayer(updateHandler, animated){
        // initialize the canvasLayer
        var canvasLayerOptions = {
          map: map,
          resizeHandler: resize,
          animate: animated,
          updateHandler: updateHandler,
          resolutionScale: resolutionScale
        };
        return new CanvasLayer(canvasLayerOptions);
      }
      
      function init() {
        map = initMap();
          
        load(refugees.geo_url).then(function(response){
            geo_handler(response);
        }, function(error){
            console.error("Failed!", error);
        }).then(function(){
            load(refugees.draw_url).then(function(response){
                draw_handler(response);
            }, function(error){
                console.error("Failed!", error);
            }).then(function(){
                google.maps.event.addListenerOnce(map, 'idle', function(){
                    updatePath();
                    canvasLayer = initCanvasLayer(update, false);
                    context = canvasLayer.canvas.getContext('2d');
                    
                    particleLayer = initCanvasLayer(particleUpdate, true);
                    particleContext = particleLayer.canvas.getContext('2d');
                    upDate();
                });
            });
        });
          
        $('#circle').click(togglePlayPause);
        $('.year').on("mousedown", ".valid", function(event){
                playBack.mouseDown = true;
                $('.valid').removeClass('cursor');
                $(this).addClass('cursor');
                upDate();
        })
        .on("mousemove", ".valid", function(event){
          if(playBack.mouseDown){
            $('.valid').removeClass('cursor');
            $(this).addClass('cursor');
            upDate();
          }
        })
        .on("mouseup", ".valid", function(){
              playBack.mouseDown = false;
        })
        .addClass('noselect');


        $('.year').addClass('noselect');

        $('document').on("mouseup", function(){
              playBack.mouseDown = false;
        });
      }
        
      document.addEventListener('DOMContentLoaded', init, false);
      window.addEventListener('resize', function () {  google.maps.event.trigger(map, 'resize') }, false);
        
    </script>
  </head>
  <body>
    <div id="map-div"></div>
    <div id="time-slider">
        <div id="play-button">
          <div id="circle">
            <div class="play"></div>
          </div>
        </div>
        <div class="year" id="y2014" data-year="2014" style="border-top: 6px solid rgb(68, 215, 168); background-color:rgba(68, 215, 168, .5)">
            <div class="month" id="m1y2014" data-month="1"><p>Jan</p></div>
            <div class="month" id="m2y2014" data-month="2"><p>Feb</p></div>
            <div class="month" id="m3y2014" data-month="3"><p>Mar</p></div>
            <div class="month" id="m4y2014" data-month="4"><p>Apr</p></div>
            <div class="month" id="m5y2014" data-month="5"><p>May</p></div>
            <div class="month" id="m6y2014" data-month="6"><p>Jun</p></div>
            <div class="month" id="m7y2014" data-month="7"><p>Jul</p></div>
            <div class="month" id="m8y2014" data-month="8"><p>Aug</p></div>
            <div class="month" id="m9y2014" data-month="9"><p>Sep</p></div>
            <div class="month" id="m10y2014" data-month="10"><p>Oct</p></div>
            <div class="month" id="m11y2014" data-month="11"><p>Nov</p></div>
            <div class="month" id="m12y2014" data-month="12"><p>Dec</p></div>
            <p>2014</p>
        </div>
        <div class="year" id="y2015" data-year="2015" style="border-top: 6px solid rgb(68, 118, 215); background-color:rgba(68, 189, 215, .5)">
            <div class="month" id="m1y2015" data-month="1"><p>Jan</p></div>
            <div class="month" id="m2y2015" data-month="2"><p>Feb</p></div>
            <div class="month" id="m3y2015" data-month="3"><p>Mar</p></div>
            <div class="month" id="m4y2015" data-month="4"><p>Apr</p></div>
            <div class="month" id="m5y2015" data-month="5"><p>May</p></div>
            <div class="month" id="m6y2015" data-month="6"><p>Jun</p></div>
            <div class="month" id="m7y2015" data-month="7"><p>Jul</p></div>
            <div class="month" id="m8y2015" data-month="8"><p>Aug</p></div>
            <div class="month" id="m9y2015" data-month="9"><p>Sep</p></div>
            <div class="month" id="m10y2015" data-month="10"><p>Oct</p></div>
            <div class="month" id="m11y2015" data-month="11"><p>Nov</p></div>
            <div class="month" id="m12y2015" data-month="12"><p>Dec</p></div>
            <p>2015</p>
        </div>
        <div class="year" id="y2016" data-year="2016" style="border-top: 6px solid rgb(215, 68, 115); background-color:rgba(215, 68, 115, .5)">
            <div class="month" id="m1y2016" data-month="1"><p>Jan</p></div>
            <div class="month" id="m2y2016" data-month="2"><p>Feb</p></div>
            <div class="month" id="m3y2016" data-month="3"><p>Mar</p></div>
            <div class="month" id="m4y2016" data-month="4"><p>Apr</p></div>
            <div class="month" id="m5y2016" data-month="5"><p>May</p></div>
            <div class="month" id="m6y2016" data-month="6"><p>Jun</p></div>
            <div class="month" id="m7y2016" data-month="7"><p>Jul</p></div>
            <div class="month" id="m8y2016" data-month="8"><p>Aug</p></div>
            <div class="month" id="m9y2016" data-month="9"><p>Sep</p></div>
            <div class="month" id="m10y2016" data-month="10"><p>Oct</p></div>
            <div class="month" id="m11y2016" data-month="11"><p>Nov</p></div>
            <div class="month" id="m12y2016" data-month="12"><p>Dec</p></div>
            <p>2016</p>
        </div>
      </div>
  </body>
</html>